{"version":3,"sources":["webpack:///./api.js","webpack:///./index.js"],"names":["axios","defaults","baseURL","login","userData","post","then","token","data","headers","common","getContacts","get","refs","loader","document","querySelector","logout","content","form","userInfo","name","email","list","cart","count","buy","products","showLoader","classList","add","hideLoader","remove","render","items","map","id","number","join","innerHTML","insertAdjacentHTML","textContent","length","addEventListener","password","user","finally","e","payload","target","elements","newContact","value","preventDefault","contact","push","dataset","type","selectedItem","find","item","pop","delete","deleteContact","filter","console","log"],"mappings":"kOACAA,IAAMC,SAASC,QAAU,4CAEzB,IAIaC,EAAQ,SAAAC,GAAQ,OAC1BJ,IAAMK,KAAK,eAAgBD,GAAUE,MAAK,YAAc,IALzCC,EAK8BC,EAAW,EAAXA,KAG7C,OAReD,EAMHC,EAAKD,MALjBP,IAAMC,SAASQ,QAAQC,OAAvB,cAAiDH,EAO1CC,MAKGG,EAAc,kBACxBX,IAAMY,IAAI,aAAaN,MAAK,qBAAGE,SCd5BK,G,UAAO,CACXC,OAAQC,SAASC,cAAc,WAC/Bb,MAAOY,SAASC,cAAc,UAC9BC,OAAQF,SAASC,cAAc,WAC/BE,QAASH,SAASC,cAAc,YAChCG,KAAMJ,SAASC,cAAc,SAC7BI,SAAUL,SAASC,cAAc,cACjCK,KAAMN,SAASC,cAAc,SAC7BM,MAAOP,SAASC,cAAc,UAC9BO,KAAMR,SAASC,cAAc,SAC7BQ,KAAMT,SAASC,cAAc,SAC7BS,MAAOV,SAASC,cAAc,UAC9BU,IAAKX,SAASC,cAAc,UAG1BW,EAAW,GACXH,EAAO,GAELI,EAAa,kBAAMf,EAAKC,OAAOe,UAAUC,IAAI,SAC7CC,EAAa,kBAAMlB,EAAKC,OAAOe,UAAUG,OAAO,SAEhDC,EAAS,WACb,IAAMC,EAAQP,EACXQ,KACC,gBAAGC,EAAH,EAAGA,GAAH,2BAAOf,KAAP,OAAagB,OAAb,+CAGqCD,EAHrC,yEAIkCA,EAJlC,yEAKqCA,EALrC,mDAQDE,KAAK,IAERzB,EAAKU,KAAKgB,UAAY,GACtB1B,EAAKU,KAAKiB,mBAAmB,YAAaN,GAE1CrB,EAAKY,MAAMgB,YAAcjB,EAAKkB,QAsFhC7B,EAAKV,MAAMwC,iBAAiB,SAnFR,WASlBf,IAEAzB,EAViB,CACfmB,MAAO,qBACPsB,SAAU,YASTtC,MAAK,YAAc,IAAXuC,EAAW,EAAXA,KACPhC,EAAKQ,KAAKoB,YAAcI,EAAKxB,KAC7BR,EAAKS,MAAMmB,YAAcI,EAAKvB,MAE9BT,EAAKV,MAAM0B,UAAUG,OAAO,QAC5BnB,EAAKI,OAAOY,UAAUC,IAAI,QAC1BjB,EAAKK,QAAQW,UAAUC,IAAI,WAE5BxB,KAAKK,GACLL,MAAK,SAAAE,GAAI,OAAKmB,EAAWnB,KACzBF,KAAK2B,GACLa,QAAQf,MA6DblB,EAAKI,OAAO0B,iBAAiB,SA1DR,WACnBf,IDxD0B5B,IAAMK,KAAK,iBC2DlCC,MAAK,WACJO,EAAKQ,KAAKoB,YAAc,GACxB5B,EAAKS,MAAMmB,YAAc,GAEzB5B,EAAKK,QAAQW,UAAUG,OAAO,QAC9BnB,EAAKI,OAAOY,UAAUG,OAAO,QAC7BnB,EAAKV,MAAM0B,UAAUC,IAAI,WAE1BgB,QAAQf,MA+CblB,EAAKM,KAAKwB,iBAAiB,UA5CN,SAAAI,GAAK,IDjEAC,ECiEA,EACCD,EAAEE,OAAOC,SAA1B7B,EADgB,EAChBA,KAAMgB,EADU,EACVA,OACRc,EAAa,CAAE9B,KAAMA,EAAK+B,MAAOf,OAAQA,EAAOe,OAEtDL,EAAEM,iBACFzB,KDtEwBoB,ECwEbG,EDvEVnD,IAAMK,KAAK,YAAa2C,GAAS1C,MAAK,qBAAGE,SCwEvCF,MAAK,SAAAgD,GACJ3B,EAAS4B,KAAKD,MAEfhD,KAAK2B,GACL3B,MAAK,WACJe,EAAK+B,MAAQ,GACbf,EAAOe,MAAQ,MAEhBN,QAAQf,MA6BblB,EAAKU,KAAKoB,iBAAiB,SA1BH,SAAAI,GAAK,MACNA,EAAEE,OAAOO,QAAtBpB,EADmB,EACnBA,GAAIqB,EADe,EACfA,KAEZ,GAAIrB,GAAe,WAATqB,EAAmB,CAC3B,IAAMC,EAAelC,EAAKmC,MAAK,SAACC,GAAD,OAAUA,EAAKxB,KAAOA,KACrDZ,EAAKqC,IAAIH,GACTzB,SACK,GAAIG,GAAe,QAATqB,EAAgB,CAC/B,IAAMC,EAAe/B,EAASgC,MAAK,SAACC,GAAD,OAAUA,EAAKxB,KAAOA,KACzDZ,EAAK+B,KAAKG,GACVzB,SACSG,GAAe,WAATqB,IACf7B,ID7FyB,SAAAQ,GAAE,OAAIpC,IAAM8D,OAAN,aAA0B1B,GC8FzD2B,CAAc3B,GAAI9B,MAAK,WACrBqB,EAAWA,EAASqC,QAAO,SAAAJ,GAAI,OAAIA,EAAKxB,KAAOA,QAC9C9B,KAAK2B,GAAQa,QAAQf,OAY5BlB,EAAKa,IAAIiB,iBAAiB,SARR,WAChBsB,QAAQC,IAAI1C,Q","file":"main.6f3eb7d9bd133c33279f.js","sourcesContent":["import axios from 'axios';\naxios.defaults.baseURL = 'https://goit-phonebook-api.herokuapp.com/';\n\nconst setToken = (token) => {\n   axios.defaults.headers.common['Authorization'] = token;\n};\n\nexport const login = userData =>\n   axios.post('/users/login', userData).then(({ data }) => {\n      setToken(data.token);\n\n   return data;\n});\n\nexport const logout = () => axios.post('/users/logout');\n\nexport const getContacts = () =>\n   axios.get('/contacts').then(({ data }) => data);\n\nexport const addContact = payload =>\n   axios.post('/contacts', payload).then(({ data }) => data);\n\nexport const deleteContact = id => axios.delete(`/contacts/${id}`);\n","import { login, logout, getContacts, addContact, deleteContact } from './api';\nimport './styles.css';\n\nconst refs = {\n  loader: document.querySelector('.loader'),\n  login: document.querySelector('.login'),\n  logout: document.querySelector('.logout'),\n  content: document.querySelector('.content'),\n  form: document.querySelector('.form'),\n  userInfo: document.querySelector('.user-info'),\n  name: document.querySelector('.name'),\n  email: document.querySelector('.email'),\n  list: document.querySelector('.list'),\n  cart: document.querySelector('.cart'),\n  count: document.querySelector('.count'),\n  buy: document.querySelector('.buy'),\n};\n\nlet products = [];\nlet cart = [];\n\nconst showLoader = () => refs.loader.classList.add('show');\nconst hideLoader = () => refs.loader.classList.remove('show');\n\nconst render = () => {\n  const items = products\n    .map(\n      ({ id, name, number }) =>\n        `<li>\n          ${name}: ${number} \n          <button class=\"remove\" data-id=${id} data-type=\"remove\">-</button>\n          <button class=\"add\" data-id=${id} data-type=\"add\">+</button>\n          <button class=\"delete\" data-id=${id} data-type=\"delete\">x</button>\n        </li>`,\n    )\n    .join('');\n\n  refs.list.innerHTML = '';\n  refs.list.insertAdjacentHTML('beforeend', items);\n\n  refs.count.textContent = cart.length; \n};\n\nconst handleLogin = () => {\n  const userData = {\n    email: 'test.user@mail.com',\n    password: '1234567',\n\n    // email: 'sergnovosad@mail.com',\n    // password: '7654321',\n  };\n\n  showLoader();\n\n  login(userData)\n    .then(({ user }) => {\n      refs.name.textContent = user.name;\n      refs.email.textContent = user.email;\n\n      refs.login.classList.remove('show');\n      refs.logout.classList.add('show');\n      refs.content.classList.add('show');\n    })\n    .then(getContacts)\n    .then(data => (products = data))\n    .then(render)\n    .finally(hideLoader);\n};\n\nconst handleLogout = () => {\n  showLoader();\n\n  logout()\n    .then(() => {\n      refs.name.textContent = '';\n      refs.email.textContent = '';\n\n      refs.content.classList.remove('show');\n      refs.logout.classList.remove('show');\n      refs.login.classList.add('show');\n    })\n    .finally(hideLoader);\n};\n\nconst handleSubmit = e => {\n  const { name, number } = e.target.elements;\n  const newContact = { name: name.value, number: number.value };\n\n  e.preventDefault();\n  showLoader();\n\n  addContact(newContact)\n    .then(contact => {\n      products.push(contact);\n    })\n    .then(render)\n    .then(() => {\n      name.value = '';\n      number.value = '';\n    })\n    .finally(hideLoader);\n};\n\nconst handleItemClick = e => {\n  const { id, type } = e.target.dataset;\n\n  if (id && type === 'remove') {\n    const selectedItem = cart.find((item) => item.id === id);\n    cart.pop(selectedItem);\n    render();\n  } else if (id && type === 'add') {\n    const selectedItem = products.find((item) => item.id === id);\n    cart.push(selectedItem);\n    render();\n  } else if (id && type === 'delete') {\n    showLoader();\n    deleteContact(id).then(() => {\n      products = products.filter(item => item.id !== id);\n    }).then(render).finally(hideLoader);\n  };\n};\n\nconst handleBuy = () => {\n  console.log(cart);\n};\n\nrefs.login.addEventListener('click', handleLogin);\nrefs.logout.addEventListener('click', handleLogout);\nrefs.form.addEventListener('submit', handleSubmit);\nrefs.list.addEventListener('click', handleItemClick);\nrefs.buy.addEventListener('click', handleBuy);"],"sourceRoot":""}